        // Profile Component
        const Profile = () => {
            const { user } = useAuth();
            const [profile, setProfile] = useState(null);
            const [manager, setManager] = useState(null);
            const [directReports, setDirectReports] = useState([]);

            useEffect(() => {
                fetchProfile();
            }, []);

            const fetchProfile = async () => {
                try {
                    const data = await apiCall(`/employees/${user.id}`);
                    setProfile(data);
                    
                    if (data.manager_id) {
                        const managerData = await apiCall(`/employees/${data.manager_id}`);
                        setManager(managerData);
                    }
                    
                    if (user.role === 'manager') {
                        const employees = await apiCall('/employees');
                        setDirectReports(employees.filter(emp => emp.manager_id === user.id));
                    }
                } catch (error) {
                    console.error('Error fetching profile:', error);
                }
            };

            if (!profile) return <div>Loading...</div>;

            return (
                <div className="max-w-4xl mx-auto py-6 px-4">
                    <h2 className="text-2xl font-bold text-gray-900 mb-6">My Profile</h2>
                    
                    <div className="bg-white shadow rounded-lg p-6 mb-6">
                        <h3 className="text-lg font-semibold mb-4">Personal Information</h3>
                        <div className="grid grid-cols-2 gap-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Name</label>
                                <p className="mt-1 text-sm text-gray-900">{profile.first_name} {profile.last_name}</p>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Email</label>
                                <p className="mt-1 text-sm text-gray-900">{profile.email}</p>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Department</label>
                                <p className="mt-1 text-sm text-gray-900">{profile.department}</p>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Position</label>
                                <p className="mt-1 text-sm text-gray-900">{profile.position}</p>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Role</label>
                                <p className="mt-1 text-sm text-gray-900 capitalize">{profile.role}</p>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Hire Date</label>
                                <p className="mt-1 text-sm text-gray-900">
                                    {profile.hire_date ? new Date(profile.hire_date).toLocaleDateString() : 'N/A'}
                                </p>
                            </div>
                        </div>
                    </div>

                    {manager && (
                        <div className="bg-white shadow rounded-lg p-6 mb-6">
                            <h3 className="text-lg font-semibold mb-4">Reporting Structure</h3>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Reports to</label>
                                <p className="mt-1 text-sm text-gray-900">
                                    {manager.first_name} {manager.last_name} - {manager.position}
                                </p>
                            </div>
                        </div>
                    )}

                    {directReports.length > 0 && (
                        <div className="bg-white shadow rounded-lg p-6">
                            <h3 className="text-lg font-semibold mb-4">Direct Reports</h3>
                            <div className="space-y-2">
                                {directReports.map(emp => (
                                    <div key={emp.id} className="flex justify-between items-center p-2 bg-gray-50 rounded">
                                        <span>{emp.first_name} {emp.last_name}</span>
                                        <span className="text-sm text-gray-600">{emp.position}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Employees Management Component
        const Employees = () => {
            const { user } = useAuth();
            const [employees, setEmployees] = useState([]);
            const [showForm, setShowForm] = useState(false);
            const [editingEmployee, setEditingEmployee] = useState(null);
            const [formData, setFormData] = useState({
                email: '', password: '', first_name: '', last_name: '',
                role: 'employee', department: '', position: '', manager_id: '', hire_date: ''
            });

            useEffect(() => {
                fetchEmployees();
            }, []);

            const fetchEmployees = async () => {
                try {
                    const data = await apiCall('/employees');
                    setEmployees(data);
                } catch (error) {
                    console.error('Error fetching employees:', error);
                }
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                try {
                    if (editingEmployee) {
                        await apiCall(`/employees/${editingEmployee.id}`, {
                            method: 'PUT',
                            body: JSON.stringify(formData)
                        });
                    } else {
                        await apiCall('/employees', {
                            method: 'POST',
                            body: JSON.stringify(formData)
                        });
                    }
                    setShowForm(false);
                    setEditingEmployee(null);
                    setFormData({
                        email: '', password: '', first_name: '', last_name: '',
                        role: 'employee', department: '', position: '', manager_id: '', hire_date: ''
                    });
                    fetchEmployees();
                } catch (error) {
                    console.error('Error saving employee:', error);
                }
            };

            const handleEdit = (employee) => {
                setEditingEmployee(employee);
                setFormData({
                    email: employee.email,
                    first_name: employee.first_name,
                    last_name: employee.last_name,
                    role: employee.role,
                    department: employee.department || '',
                    position: employee.position || '',
                    manager_id: employee.manager_id || '',
                    hire_date: employee.hire_date || ''
                });
                setShowForm(true);
            };

            const handleDeactivate = async (employeeId) => {
                if (confirm('Are you sure you want to deactivate this employee?')) {
                    try {
                        await apiCall(`/employees/${employeeId}`, { method: 'DELETE' });
                        fetchEmployees();
                    } catch (error) {
                        console.error('Error deactivating employee:', error);
                    }
                }
            };

            return (
                <div className="max-w-6xl mx-auto py-6 px-4">
                    <div className="flex justify-between items-center mb-6">
                        <h2 className="text-2xl font-bold text-gray-900">Employee Management</h2>
                        {user.role === 'admin' && (
                            <button
                                onClick={() => setShowForm(true)}
                                className="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"
                            >
                                Add Employee
                            </button>
                        )}
                    </div>

                    {showForm && (
                        <div className="bg-white shadow rounded-lg p-6 mb-6">
                            <h3 className="text-lg font-semibold mb-4">
                                {editingEmployee ? 'Edit Employee' : 'Add New Employee'}
                            </h3>
                            <form onSubmit={handleSubmit} className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700">Email</label>
                                    <input
                                        type="email"
                                        value={formData.email}
                                        onChange={(e) => setFormData({...formData, email: e.target.value})}
                                        className="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md"
                                        required
                                    />
                                </div>
                                {!editingEmployee && (
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">Password</label>
                                        <input
                                            type="password"
                                            value={formData.password}
                                            onChange={(e) => setFormData({...formData, password: e.target.value})}
                                            className="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md"
                                            required
                                        />
                                    </div>
                                )}
                                <div>
                                    <label className="block text-sm font-medium text-gray-700">First Name</label>
                                    <input
                                        type="text"
                                        value={formData.first_name}
                                        onChange={(e) => setFormData({...formData, first_name: e.target.value})}
                                        className="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md"
                                        required
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700">Last Name</label>
                                    <input
                                        type="text"
                                        value={formData.last_name}
                                        onChange={(e) => setFormData({...formData, last_name: e.target.value})}
                                        className="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md"
                                        required
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700">Role</label>
                                    <select
                                        value={formData.role}
                                        onChange={(e) => setFormData({...formData, role: e.target.value})}
                                        className="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md"
                                    >
                                        <option value="employee">Employee</option>
                                        <option value="manager">Manager</option>
                                        <option value="admin">Admin</option>
                                    </select>
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700">Department</label>
                                    <input
                                        type="text"
                                        value={formData.department}
                                        onChange={(e) => setFormData({...formData, department: e.target.value})}
                                        className="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700">Position</label>
                                    <input
                                        type="text"
                                        value={formData.position}
                                        onChange={(e) => setFormData({...formData, position: e.target.value})}
                                        className="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700">Manager</label>
                                    <select
                                        value={formData.manager_id}
                                        onChange={(e) => setFormData({...formData, manager_id: e.target.value})}
                                        className="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md"
                                    >
                                        <option value="">Select Manager</option>
                                        {employees.filter(emp => emp.role === 'manager').map(manager => (
                                            <option key={manager.id} value={manager.id}>
                                                {manager.first_name} {manager.last_name}
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                <div className="col-span-2 flex justify-end space-x-3">
                                    <button
                                        type="button"
                                        onClick={() => {
                                            setShowForm(false);
                                            setEditingEmployee(null);
                                        }}
                                        className="bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400"
                                    >
                                        Cancel
                                    </button>
                                    <button
                                        type="submit"
                                        className="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"
                                    >
                                        {editingEmployee ? 'Update' : 'Create'}
                                    </button>
                                </div>
                            </form>
                        </div>
                    )}

                    <div className="bg-white shadow rounded-lg overflow-hidden">
                        <table className="min-w-full divide-y divide-gray-200">
                            <thead className="bg-gray-50">
                                <tr>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Name</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Email</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Role</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Department</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Position</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody className="bg-white divide-y divide-gray-200">
                                {employees.map(employee => (
                                    <tr key={employee.id}>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                            {employee.first_name} {employee.last_name}
                                        </td>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            {employee.email}
                                        </td>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize">
                                            {employee.role}
                                        </td>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            {employee.department}
                                        </td>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            {employee.position}
                                        </td>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <button
                                                onClick={() => handleEdit(employee)}
                                                className="text-blue-600 hover:text-blue-900 mr-3"
                                            >
                                                Edit
                                            </button>
                                            {user.role === 'admin' && (
                                                <button
                                                    onClick={() => handleDeactivate(employee.id)}
                                                    className="text-red-600 hover:text-red-900"
                                                >
                                                    Deactivate
                                                </button>
                                            )}
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };